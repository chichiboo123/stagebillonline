<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STAGEBILL - 뮤지컬 수업 자료 큐레이션</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar" id="navbar">
    <!-- Top row: Logo + Controls -->
    <div class="nav-top">
      <a href="#" class="logo" onclick="resetView()">STAGEBILL</a>
      <div class="nav-right">
        <div class="lang-switcher" id="langSwitcher">
          <button class="lang-btn active" data-lang="ko">KO</button>
          <button class="lang-btn" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="ja">JP</button>
        </div>
        <div class="search-container" id="searchContainer">
          <button class="search-btn" id="searchBtn" aria-label="검색">
            <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          </button>
          <input type="text" class="search-input" id="searchInput" placeholder="작품명, 해시태그, 키워드 검색...">
        </div>
        <button class="upload-btn" id="uploadBtn" title="새 내용 업로드">
          <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
          <span>업로드</span>
        </button>
      </div>
    </div>
    <!-- Category links row -->
    <ul class="nav-links" id="navLinks">
      <li><a href="#" class="active" data-filter="all">전체</a></li>
      <li><a href="#" data-filter="과학">과학</a></li>
      <li><a href="#" data-filter="가족">가족</a></li>
      <li><a href="#" data-filter="진로">진로</a></li>
      <li><a href="#" data-filter="힐링">힐링</a></li>
      <li><a href="#" data-filter="일상">일상</a></li>
      <li><a href="#" data-filter="성장">성장</a></li>
      <li><a href="#" data-filter="결실">결실</a></li>
      <li><a href="#" data-filter="컬러">컬러</a></li>
    </ul>
  </nav>

  <!-- Hero Banner -->
  <section class="hero" id="heroBanner">
    <div class="hero-gradient"></div>
    <div class="hero-content">
      <span class="hero-badge" data-i18n="hero.badge">STAGEBILL 추천</span>
      <h1 class="hero-title" id="heroTitle"></h1>
      <div class="hero-hashtags" id="heroHashtags"></div>
      <p class="hero-description" id="heroDescription"></p>
      <div class="hero-buttons">
        <button class="btn-primary" id="heroDetailBtn">
          <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
          <span data-i18n="hero.detail">자세히 보기</span>
        </button>
        <button class="btn-secondary" id="heroRandomBtn">
          <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
          <span data-i18n="hero.random">랜덤 추천</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Search Results (hidden by default) -->
  <section class="search-results-section" id="searchResults" style="display:none;">
    <div class="section-header">
      <h2 id="searchResultTitle"></h2>
    </div>
    <div class="card-grid" id="searchResultGrid"></div>
  </section>

  <!-- Content Rows -->
  <main class="content-area" id="contentArea">
    <!-- Rows will be dynamically injected -->
  </main>

  <!-- Detail Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <button class="modal-close" id="modalClose">&times;</button>
      <div class="modal-hero" id="modalHero">
        <div class="modal-hero-gradient"></div>
        <div class="modal-hero-content">
          <h1 id="modalTitle"></h1>
          <div class="modal-meta">
            <span class="modal-category" id="modalCategory"></span>
            <span class="modal-curator" id="modalCurator"></span>
            <span class="modal-year" id="modalYear"></span>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <!-- Sibling versions: same title, different categories -->
        <div class="modal-sibling-section" id="modalSiblingSection" style="display:none;">
          <span class="sibling-label" id="modalSiblingLabel">같은 작품 다른 내용</span>
          <div class="modal-sibling-list" id="modalSiblingList"></div>
        </div>
        <div class="modal-section">
          <h3 data-i18n="modal.description">작품 소개</h3>
          <p id="modalDescription"></p>
        </div>
        <div class="modal-section">
          <h3 data-i18n="modal.numbers">추천 넘버</h3>
          <div class="number-list" id="modalNumbers"></div>
        </div>
        <div class="modal-section">
          <h3 data-i18n="modal.ideaNotes">뮤지컬 수업 아이디어 노트</h3>
          <div class="idea-note" id="modalIdeaNotes"></div>
        </div>
        <div class="modal-section">
          <h3 data-i18n="modal.playlist">참고 영상</h3>
          <div id="playlistEmbed"></div>
          <a href="#" class="playlist-link" id="modalPlaylist" target="_blank" rel="noopener noreferrer">
            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></svg>
            <span data-i18n="modal.playlistLink">YouTube에서 보기</span>
          </a>
        </div>
        <!-- References section (shown only when references exist) -->
        <div class="modal-section" id="modalReferencesSection" style="display:none;">
          <h3 data-i18n="modal.references">참고자료</h3>
          <div class="reference-list" id="modalReferences"></div>
        </div>
        <div class="modal-section">
          <h3 data-i18n="modal.hashtags">해시태그</h3>
          <div class="hashtag-list" id="modalHashtags"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">STAGEBILL</div>
      <p class="footer-description" data-i18n="footer.description">교실에서 시작하는 뮤지컬 수업</p>
      <p class="footer-copyright">
        <a href="https://litt.ly/stage" target="_blank" rel="noopener noreferrer">&copy; 2026 경기도뮤지컬교육연구회 STAGE.</a>
        &nbsp;/&nbsp;
        <a href="https://litt.ly/chichiboo" target="_blank" rel="noopener noreferrer">교육뮤지컬 꿈꾸는 치수쌤</a>
      </p>
    </div>
  </footer>

  <!-- Upload Overlay -->
  <div class="upload-overlay" id="uploadOverlay">
    <div class="upload-modal">
      <button class="upload-close" id="uploadClose">&times;</button>

      <!-- Step 1: 비밀번호 -->
      <div id="uploadPasswordStep">
        <h2 class="upload-modal-title">업로드</h2>
        <p class="upload-modal-sub">비밀번호를 입력하세요</p>
        <div class="upload-pwd-wrap">
          <input type="password" id="uploadPassword" class="upload-pwd-input" placeholder="비밀번호" autocomplete="off" />
          <button class="upload-pwd-btn" id="uploadPasswordBtn">확인</button>
        </div>
        <p class="upload-pwd-error" id="uploadPwdError"></p>
      </div>

      <!-- Step 2: 업로드 폼 -->
      <div id="uploadFormStep" style="display:none;">
        <h2 class="upload-modal-title">새 내용 업로드</h2>
        <form id="uploadForm" class="upload-form" autocomplete="off">

          <div class="upload-section-label">📋 기본 정보</div>
          <div class="upload-field">
            <label>작품명 <span class="req">*</span></label>
            <input type="text" name="title" required placeholder="한국어 작품명" />
          </div>
          <div class="upload-field">
            <label>카테고리 <span class="req">*</span></label>
            <select name="category" id="uploadCategory" required>
              <option value="">선택하세요</option>
              <option value="과학">🔬 과학</option>
              <option value="가족">👨‍👩‍👧 가족</option>
              <option value="진로">🧭 진로</option>
              <option value="힐링">🌿 힐링</option>
              <option value="일상">🎭 일상</option>
              <option value="성장">🌱 성장</option>
              <option value="결실">🏆 결실</option>
              <option value="컬러">🎨 컬러</option>
            </select>
          </div>
          <div class="upload-row-2">
            <div class="upload-field">
              <label>큐레이터 <span class="req">*</span></label>
              <input type="text" name="curator" required placeholder="큐레이터명 또는 기관" />
            </div>
            <div class="upload-field">
              <label>작품 연도 <span class="req">*</span></label>
              <input type="number" name="year" required placeholder="예: 2005" min="1900" max="2100" />
            </div>
          </div>
          <div class="upload-row-2">
            <div class="upload-field">
              <label>큐레이션 연도</label>
              <input type="number" name="curationYear" placeholder="예: 2026" value="2026" />
            </div>
            <div class="upload-field">
              <label>카드 색상</label>
              <input type="color" name="color" value="#E50914" class="upload-color" />
            </div>
          </div>

          <div class="upload-section-label">✏️ 콘텐츠</div>
          <div class="upload-field">
            <label>작품 소개</label>
            <textarea name="description" rows="3" placeholder="작품 소개 (2-4문장 추천)"></textarea>
          </div>
          <div class="upload-field">
            <label>수업 아이디어 노트</label>
            <textarea name="ideaNotes" rows="3" placeholder="수업 활용 아이디어"></textarea>
          </div>
          <div class="upload-field">
            <label>추천 넘버 ①  제목 / 설명</label>
            <div class="upload-inline-2">
              <input type="text" name="number1_title" placeholder="넘버 제목" />
              <input type="text" name="number1_desc" placeholder="한 줄 설명" />
            </div>
          </div>
          <div class="upload-field">
            <label>추천 넘버 ②  제목 / 설명</label>
            <div class="upload-inline-2">
              <input type="text" name="number2_title" placeholder="넘버 제목" />
              <input type="text" name="number2_desc" placeholder="한 줄 설명" />
            </div>
          </div>

          <div class="upload-section-label">🎬 미디어 &amp; 해시태그</div>
          <div class="upload-field">
            <label>포스터 이미지 URL</label>
            <input type="url" name="thumbnail" placeholder="https://..." />
          </div>
          <div class="upload-field">
            <label>YouTube 링크 (참고 영상)</label>
            <input type="url" name="playlistLink" placeholder="https://youtube.com/watch?v=..." />
          </div>
          <div class="upload-field">
            <label>해시태그</label>
            <input type="text" name="hashtags" placeholder="#힐링, #위로, #공감  (쉼표로 구분)" />
          </div>

          <!-- 번역 (접기/펼치기) -->
          <details class="upload-details">
            <summary class="upload-section-label">🌐 번역 (선택 — 접어서 보기)</summary>
            <div class="upload-field">
              <label>영문 작품명</label>
              <input type="text" name="title_en" placeholder="Title in English" />
            </div>
            <div class="upload-field">
              <label>영문 소개</label>
              <textarea name="description_en" rows="2" placeholder="Description in English"></textarea>
            </div>
            <div class="upload-field">
              <label>영문 넘버 ① 제목 / 설명</label>
              <div class="upload-inline-2">
                <input type="text" name="number1_title_en" placeholder="Number title" />
                <input type="text" name="number1_desc_en" placeholder="One-line description" />
              </div>
            </div>
            <div class="upload-field">
              <label>일문 작품명</label>
              <input type="text" name="title_ja" placeholder="日本語タイトル" />
            </div>
            <div class="upload-field">
              <label>일문 소개</label>
              <textarea name="description_ja" rows="2" placeholder="日本語の説明"></textarea>
            </div>
            <div class="upload-field">
              <label>일문 넘버 ① 제목 / 설명 <small>(스프레드시트 열명: _jp)</small></label>
              <div class="upload-inline-2">
                <input type="text" name="number1_title_jp" placeholder="ナンバータイトル" />
                <input type="text" name="number1_desc_jp" placeholder="一言説明" />
              </div>
            </div>
          </details>

          <div class="upload-actions">
            <button type="submit" class="upload-submit-btn">업로드</button>
          </div>
        </form>
        <div class="upload-result" id="uploadResult"></div>
      </div>
    </div>
  </div>

  <script src="js/app.js?v=20260222d"></script>
</body>
</html>
